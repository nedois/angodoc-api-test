(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+WJn":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>t.agency&&parseInt(e)===t.agency.id||"administrador"===t.role},"/PoT":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("55Ip"),l=a("17x9"),o=a.n(l),i=a("iuhU"),m=a("R/WZ"),s=a("tRbT"),u=a("hlFM"),d=a("ofer"),E=a("Z3vd"),b=a("HR5l"),g=a("Fn3X"),f=a("EBQD"),p=a("Sgle"),y=a("hlie"),h=a("bo4g"),v=a.n(h);function O({items:e}){return r.a.createElement(p.a,{separator:r.a.createElement(v.a,{fontSize:"small"}),"aria-label":"breadcrumb"},e.map((e,t)=>e.to?r.a.createElement(y.a,{key:t,variant:"body1",color:"inherit",to:e.to,component:c.a},e.label):r.a.createElement(d.a,{key:t,variant:"body1",color:e.active?"textPrimary":"inherit"},e.label)))}O.propTypes={items:o.a.array.isRequired};var x=O;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const j=Object(m.a)(e=>({root:{},action:{marginBottom:e.spacing(1),"& + &":{marginLeft:e.spacing(1)}}})),N=e=>{let{className:t,breadcrumbItems:a,title:n,actionButtonType:l,actionButtonLabel:o,actionButtonTo:m,children:p}=e,y=I(e,["className","breadcrumbItems","title","actionButtonType","actionButtonLabel","actionButtonTo","children"]);const h=j();return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,R({className:Object(i.a)(h.root,t),container:!0,justify:"space-between",spacing:3},y),r.a.createElement(s.a,{item:!0},r.a.createElement(x,{items:a}),r.a.createElement(u.a,{mt:2},r.a.createElement(d.a,{variant:"h3",color:"textPrimary"},n))),m&&r.a.createElement(s.a,{item:!0},r.a.createElement(E.a,{color:"secondary",variant:"contained",component:c.a,to:m,startIcon:r.a.createElement(b.a,{fontSize:"small"},"edit"===l?r.a.createElement(g.a,null):r.a.createElement(f.a,null))},o))),p)};N.propTypes={className:o.a.string,breadcrumbItems:o.a.array.isRequired,title:o.a.string.isRequired,actionButtonType:o.a.string,actionButtonLabel:o.a.string,actionButtonTo:o.a.string};t.a=N},"398m":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("qhky"),l=a("17x9"),o=a.n(l);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s=Object(n.forwardRef)((e,t)=>{let{children:a,title:n=""}=e,l=m(e,["children","title"]);return r.a.createElement("div",i({ref:t},l),r.a.createElement(c.a,null,r.a.createElement("title",null,n)),a)});s.propTypes={children:o.a.node.isRequired,title:o.a.string},t.a=s},FUeM:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),c=a("R/WZ"),l=a("Ji2X"),o=a("hlFM"),i=a("tRbT"),m=a("M84o"),s=a("STNO"),u=a("jHwE"),d=a("/PoT"),E=a("398m"),b=a("I7ZY"),g=a("C+gv"),f=a("mtYD"),p=a("30+C"),y=a("50B7"),h=a("wb2y"),v=a("/EAt"),O=a("Uf6+"),x=a("sRsu"),R=a("3PeG"),I=a("ofer"),j=a("Z3vd"),N=a("+Gb9"),S=a.n(N);const M=Object(c.a)(e=>({fontWeightMedium:{fontWeight:e.typography.fontWeightMedium},actionIcon:{marginRight:e.spacing(1)}}));var W=function({agency:e}){const t=M();return r.a.createElement(p.a,null,r.a.createElement(y.a,{title:"Agência"}),r.a.createElement(h.a,null),r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(x.a,null,r.a.createElement(R.a,{className:t.fontWeightMedium},"Nome"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.name))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:t.fontWeightMedium},"Endereço"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.address))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:t.fontWeightMedium},"Província"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.province))))),r.a.createElement(o.a,{p:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},r.a.createElement(j.a,null,r.a.createElement(S.a,{className:t.actionIcon}),"Ver agência")))};const T=Object(c.a)(e=>({fontWeightMedium:{fontWeight:e.typography.fontWeightMedium}}));var k=function({document:e,children:t}){const a=T();return r.a.createElement(p.a,null,r.a.createElement(y.a,{title:"Documentos"}),r.a.createElement(h.a,null),r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Referência"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.reference))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Tipo"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.document_type))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Proprietário"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.owner))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Data de emissão"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.date_emission))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Registado por"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.creator))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Comentário"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.commentary?e.attributes.commentary:"Sem comentários"))),r.a.createElement(x.a,null,r.a.createElement(R.a,{className:a.fontWeightMedium},"Recuperado"),r.a.createElement(R.a,null,r.a.createElement(I.a,{variant:"body2",color:"textSecondary"},e.attributes.recovered_at?e.attributes.recovered_at:"Não"))))),t)},w=a("e8Tb"),q=a("17x9"),B=a.n(q),D=a("55Ip"),P=a("FfST"),C=a.n(P),A=a("5rCv"),$=a.n(A),F=a("Fn3X"),_=a("NKQG"),U=a("+WJn");const Z=Object(c.a)(e=>({fontWeightMedium:{fontWeight:e.typography.fontWeightMedium},actionIcon:{marginRight:e.spacing(1)},deleteAction:{color:e.palette.common.white,backgroundColor:e.palette.error.main,"&:hover":{backgroundColor:e.palette.error.dark}},checkAction:{color:e.palette.common.white,backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark},marginTop:e.spacing(1),marginBottom:e.spacing(1)}}));function L({id:e,isRecovered:t,setIsRecovered:a,isDeleted:c,documentAgencyId:l}){const i=Z(),[s,d]=Object(n.useState)(!1),{enqueueSnackbar:E}=Object(_.b)(),{user:g}=Object(w.a)();return r.a.createElement(o.a,{p:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},Object(U.a)(l,g)?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{component:D.a,to:`${b.d.URI}/${e}/editar`,disabled:s||!!t||!!c},r.a.createElement(F.a,{className:i.actionIcon}),"Editar documento"),r.a.createElement(j.a,{className:i.checkAction,onClick:async()=>{d(!0),await m.a.post(`${u.a}/documents/${e}/markAsRecovered`).then(e=>{E("Documento marcado como recuperado",{variant:"success"}),d(!1),a(!0)}).catch(e=>{d(!1),E(e.message,{variant:"error"})})},disabled:s||!!t||!!c},r.a.createElement($.a,{className:i.actionIcon}),"Marcar como recuperado"),r.a.createElement(j.a,{className:i.deleteAction,onClick:async()=>{d(!0),await m.a.delete(`${u.a}/documents/${e}`).then(e=>{d(!1),E("Documento deletado",{variant:"success"})}).catch(e=>{d(!1),E(e.message,{variant:"error"})})},disabled:s||!!c||!!t},r.a.createElement(C.a,{className:i.actionIcon}),"Apagar documento")):null)}L.proptypes={id:B.a.string.isRequired,isRecovered:B.a.bool.isRequired,setIsRecovered:B.a.func.isRequired};var X=L;const J=Object(c.a)(e=>({root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}})),Y=[{label:"Recursos"},{label:"Documentos",to:b.d.URI},{label:"Detalhes do documento",active:!0}];t.default=function({match:e}){const t=J(),a=Object(s.a)(),[c,p]=Object(n.useState)(null),[y,h]=Object(n.useState)(c&&c.recovered_at),{id:v}=e.params,{user:O}=Object(w.a)(),x=Object(n.useCallback)(()=>{m.a.get(`${u.b}/documents/${v}?include=agency,finder`).then(e=>{a.current&&(p(e.data),h(e.data.data.attributes.recovered_at))})},[a]);return Object(n.useEffect)(()=>{x()},[x]),c?r.a.createElement(E.a,{className:t.root,title:"Detalhes do documento "+c.data.attributes.reference},r.a.createElement(l.a,null,r.a.createElement(d.a,{title:"Detalhes do documento "+c.data.attributes.reference,breadcrumbItems:Y,actionButtonTo:"administrador"!=O.role?b.d.CREATE_URI:null,actionButtonLabel:"Registar documento"}),r.a.createElement(o.a,{mt:2},r.a.createElement(i.a,{container:!0,spacing:3},r.a.createElement(i.a,{container:!0,spacing:3},r.a.createElement(i.a,{item:!0,lg:4,sx:12},r.a.createElement(k,{document:c.data},r.a.createElement(X,{id:c.data.id,documentAgencyId:c.included[1].id,setIsRecovered:h,isRecovered:y,isDeleted:c.data.attributes.deleted_at&&!0}))),r.a.createElement(i.a,{item:!0,lg:4,sx:12},r.a.createElement(W,{agency:c.included[1]})),r.a.createElement(i.a,{item:!0,lg:4,sx:12},r.a.createElement(f.a,{finder:c.included[0]}))))))):r.a.createElement(g.a,null)}},M84o:function(e,t,a){"use strict";var n=a("vDqi"),r=a.n(n);const c=document.querySelector("[name=csrf-token]").getAttribute("content"),l=r.a.create();l.interceptors.response.use(e=>e,e=>Promise.reject(e.response&&e.response.data||"Something went wrong")),l.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",l.defaults.headers.common["X-CSRF-TOKEN"]=c,t.a=l},STNO:function(e,t,a){"use strict";var n=a("q1tI");t.a=()=>{const e=Object(n.useRef)(!0);return Object(n.useEffect)(()=>()=>{e.current=!1},[]),e}},mtYD:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("17x9"),l=a.n(c),o=a("55Ip"),i=a("R/WZ"),m=a("30+C"),s=a("50B7"),u=a("wb2y"),d=a("/EAt"),E=a("Uf6+"),b=a("sRsu"),g=a("3PeG"),f=a("ofer"),p=a("hlFM"),y=a("Z3vd"),h=a("Yjro"),v=a.n(h),O=a("I7ZY");const x=Object(i.a)(e=>({fontWeightMedium:{fontWeight:e.typography.fontWeightMedium},actionIcon:{marginRight:e.spacing(1)}}));function R({finder:e}){const t=x();return r.a.createElement(m.a,null,r.a.createElement(s.a,{title:"Encontrador"}),r.a.createElement(u.a,null),r.a.createElement(d.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Nome"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},`${e.attributes.first_name} ${e.attributes.last_name}`))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Idade"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.age," anos"))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"N° BI"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.bi))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Sexo"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},"M"===e.attributes.gender?"Masculino":"Feminino"))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Ocupação"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.job))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Endereço"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.address))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Provincia"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.province))),r.a.createElement(b.a,null,r.a.createElement(g.a,{className:t.fontWeightMedium},"Telefone"),r.a.createElement(g.a,null,r.a.createElement(f.a,{variant:"body2",color:"textSecondary"},e.attributes.phone_number))))),r.a.createElement(p.a,{p:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},r.a.createElement(y.a,{component:o.a,to:`${O.f.URI}/${e.id}`},r.a.createElement(v.a,{className:t.actionIcon}),"Ver encontrador")))}R.propTypes={finder:l.a.object.isRequired},t.a=R}}]);
//# sourceMappingURL=24.js.map